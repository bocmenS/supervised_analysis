 ачество модели интернет-магазин «В один клик». 
Описание проекта: Интернет-магазин «В один клик» продаёт разные товары: для детей, для дома, мелкую бытовую технику, косметику и даже продукты. Отчёт магазина за прошлый период показал, что активность покупателей начала снижаться. Привлекать новых клиентов уже не так эффективно: о магазине и так знает большая часть целевой аудитории. Возможный выход — удерживать активность постоянных клиентов. Сделать это можно с помощью персонализированных предложений.
  

Цель исследования:

1.Нужно построить модель, которая предскажет вероятность снижения покупательской активности клиента в следующие три месяца.

2.В исследование нужно включить дополнительные данные финансового департамента о прибыльности клиента: какой доход каждый покупатель приносил компании за последние три месяца.

3.Используя данные модели и данные о прибыльности клиентов, нужно выделить сегменты покупателей и разработать для них персонализированные предложения.

Ход исследования:

1.Загрузка данных

2.Предобработка данных

3.Исследовательский анализ данных

4.Объединить таблицы

5.Корреляционный анализ

6.Использование пайплайнов

7.Анализ важности признаков

8.Сегментация покупателей

9.Общий вывод





market_file.csv</b>-Таблица, которая содержит данные о поведении покупателя на сайте, о коммуникациях с покупателем и его продуктовом поведении.
id— номер покупателя в корпоративной базе данных.

Покупательская активность— рассчитанный класс покупательской активности (целевой признак): «снизилась» или «прежний уровень».
Тип сервиса— уровень сервиса, например «премиум» и «стандарт».

Разрешить сообщать— информация о том, можно ли присылать покупателю дополнительные предложения о товаре. Согласие на это даёт покупатель.

Маркет_актив_6_мес— среднемесячное значение маркетинговых коммуникаций компании, которое приходилось на покупателя за последние 6 месяцев. Это значение показывает, какое число рассылок, звонков, показов рекламы и прочего приходилось на клиента.

Маркет_актив_тек_мес— количество маркетинговых коммуникаций в текущем месяце.

Длительность— значение, которое показывает, сколько дней прошло с момента регистрации покупателя на сайте.

Акционные_покупки— среднемесячная доля покупок по акции от общего числа покупок за последние 6 месяцев.

Популярная_категориям— самая популярная категория товаров у покупателя за последние 6 месяцев.

Средний_просмотр_категорий_за_визит— показывает, сколько в среднем категорий покупатель просмотрел за визит в течение последнего месяца.

Неоплаченные_продукты_штук_квартал— общее число неоплаченных товаров в корзине за последние 3 месяца.

Ошибка_сервиса— число сбоев, которые коснулись покупателя во время посещения сайта.

Страниц_за_визит— среднее количество страниц, которые просмотрел покупатель за один визит на сайт за последние 3 месяца.

market_money.csv-таблица с данными о выручке, которую получает магазин с покупателя, то есть сколько покупатель всего потратил за период взаимодействия с сайтом.
id — номер покупателя в корпоративной базе данных.

Период — название периода, во время которого зафиксирована выручка. Например, 'текущий_месяц' или 'предыдущий_месяц'.

Выручка >— сумма выручки за период.
    
market_time.csv-таблица с данными о времени (в минутах), которое покупатель провёл на сайте в течение периода.

id — номер покупателя в корпоративной базе данных.

Период — название периода, во время которого зафиксировано общее время.

минут — значение времени, проведённого на сайте, в минутах.
    
money.csv-таблица с данными о среднемесячной прибыли продавца за последние 3 месяца: какую прибыль получает магазин от продаж каждому покупателю.

id — номер покупателя в корпоративной базе данных.

Прибыль — значение прибыли.

Общий вывод
Разработать решение, которое позволит персонализировать предложения постоянным клиентам, чтобы увеличить их покупательскую активность.


Загрузка данных

Исходными данными для исследования были четыре отдельных csv файла:

с данными о поведении покупателя на сайте, коммуникации с ним и его продуктовом поведении.
с данными о выручке, которую получает магазин с покупателя за период
с данными о времени (в минутах), которое покупатель провёл на сайте в течение периода
данными о среднемесячной прибыли покупателя за последние 3 месяца: какую прибыль получает магазин от продаж каждому покупателю Данные были загружены в датафреймы библиотеки pandas.

<Предобработка данных
    
В датасете data маркет_актив_6_мес преобразовали из object в float,заменили в названии столбцов пробелы на нижнее подчеркивание, устранили неявный дубликат в столбце Тип сервиса. 

В датасете market_money в столбце 'Выручка' явная аномалия 106862, удалили его.

В датасете time необходимо исправить столбец минут писать с большой буквы, нашли опечатку в столбце период 'предыдцщий_месяц' заменили на 'предыдущий_месяц'

В датасете money преобразовали столбец Прибыль из object в float,предварительно заменили запятые на точки. 

Исследовательский анализ данных

Были выявлены и исправлены ошибки в данных, включая опечатки, которые хорошо визуализировались на построенных графиках распределений.

Обнаружено незначительное количество явных аномалий - такие выбросы были исключены из дальнейшего анализа для повышения качества данных.

Проведенная проверка показала, что в целом данные имеют хорошее качество и пригодны для анализа.

В выборку включены только активные пользователи - те, кто совершал покупки в течение последнего квартала (3 месяцев). 

Таким образом, данные были очищены и подготовлены для последующего углубленного анализа и построения моделей.


Корреляционный анализ данных

С таргетом(покупательская активность) имеют корреляцию: Маркет_актив_6_мес, Акционные_покупки, Средний_просмотр_категорий_за_визит, Неоплаченные_продукты_штук_квартал, Страниц_за_визит, Выручка_препредыдущий_месяц, минут_предыдущий_месяц, минут_текущий_месяц.
Среди признаков замечана только одна более менее сильная корреляция Выручка_предыдущий_месяц, Выручка_текущий_месяц.
Так же график показал сильную зависимость между целевым признаком и id так что в дальнейшем при подготовке данных к обучению модели признак идентификатор был удален. 


Объеденение таблиц

Датасеты data, market_money, time были объеденены в один датафрейм.


Обучение модели

С использованием пайпланов из библиотеки sklearn были обучены модели KNeighborsClassifier(), DecisionTreeClassifier(), LogisticRegression() и SVC(). При обучении моделей подобрали гиперпараметры с лучшим результатом.
По результатам обучения лучшей стала модель LogisticRegression(C=1, penalty='l1', random_state=42, solver='liblinear'). Метрика roc_auc для тренеровочной выборки 0.89 для тестовой 0.91. Удивительно, но значения метрики имеют такой низкий разброс. И даже наличие дисбаланса в целевом признаке не помешало получить значение метрики f1=0.89.

Анализ важности признаков

На основе анализа данных становится очевидно, что ключевым фактором, влияющим на покупательскую активность, является время, которое пользователь проводит на маркетплейсе. Чем дольше человек остается на платформе, тем выше вероятность совершения покупки.


Сегментация пользователей

Для анализа пользователей было выбрано сегмент пользователей, который  имеет высокую вероятность снижения покупательской активности и часто совершающие покупки по скидке.

Чтобы увеличить продажи, маркетплейсу стоит сосредоточиться на оптимизации внутреннего – улучшении навигации, персонализации ленты товаров. Рассылки и спам необходимо использовать точечно, когда действительно стоит информировать пользователя. Главная задача – сделать так, чтобы пользователь добровольно задерживался на платформе, был информирован о выгодных предложениях и быстро находил нужный товар.
